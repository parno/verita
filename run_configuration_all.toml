verus_git_url = "https://github.com/verus-lang/verus.git"
verus_refspec = "main"
verus_features = ["singular"]
verus_extra_args = ["--no-report-long-running"]

[[project]]
name = "ironkv"
git_url = "https://github.com/verus-lang/verified-ironkv.git"
refspec = "main"
crate_roots = ["ironsht/src/lib.rs"]
extra_args = ["--crate-type=dylib"]

[[project]]
name = "memory-allocator"
git_url = "https://github.com/verus-lang/verified-memory-allocator.git"
refspec = "main"
crate_roots = ["verus-mimalloc/lib.rs"]
extra_args = [
    "--extern", "libc=build/liblibc.rlib",
    "--triggers-mode", "silent",
    "--rlimit", "240",
]
prepare_script = """
pushd test_libc
cargo clean
cargo +1.82.0 build --release
popd
LIBC_RLIB_NAME=$(find ./test_libc/target/release/deps/ -name 'liblibc-*.rlib')
mkdir -p build
cp $LIBC_RLIB_NAME build/liblibc.rlib
"""

[[project]]
name = "page-table"
git_url = "https://github.com/matthias-brun/verified-nrkernel.git"
refspec = "main"
crate_roots = ["page-table/src/lib.rs"]
extra_args = ["--crate-type=lib", "--rlimit", "60", "--cfg", "feature=\"impl\""]

[[project]]
name = "verified-storage"
git_url = "https://github.com/microsoft/verified-storage.git"
refspec = "main"
crate_roots = ["pmemlog/src/lib.rs"]

[[project]]
name = "node-replication"
git_url = "https://github.com/verus-lang/verified-node-replication.git"
refspec = "main"
crate_roots = ["verified-node-replication/src/lib.rs"]
extra_args = ["--crate-type=dylib"]

[[project]]
name = "vest"
git_url = "https://github.com/secure-foundations/vest.git"
refspec = "main"
crate_roots = [""]
extra_args = []

[[project]]
name = "anvil"
git_url = "https://github.com/anvil-verifier/anvil.git tmp\anvil"
refspec = "main"
crate_roots = [""]
extra_args = []
prepare_script = """
pushd src/deps_hack
cargo clean
cargo +1.92.0 build -v
popd
"""


